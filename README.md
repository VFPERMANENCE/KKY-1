Вариант №19 Эмулятор командной оболочки с виртуальной файловой системой (VFS), написанный для максимально похожей работы на UNIX-подобную командную строку. Цель проекта — дать пользователю возможность работать с виртуальной файловой системой, запускать команды и скрипты в интерактивном режиме, имитируя опыт использования реального терминала.

Функциональность по этапам

Этап 1 — REPL (минимальный прототип)

Цель: создать первую рабочую версию, где уже есть диалог с пользователем. Что реализовано: GUI-приложение с заголовком окна, содержащим имя VFS. Парсер командной строки, корректно обрабатывающий аргументы в кавычках. Обработка ошибок (неизвестная команда, неверные аргументы).

Команды: ls - выводит своё имя и аргументы. cd - выводит своё имя и аргументы. exit - для завершения работы эмулятора. Поддержка интерактивного режима (REPL).

Этап 2 — Конфигурация Цель: добавить настройку приложения через параметры командной строки.

Что реализовано:

Поддержка параметров: путь к физическому расположению VFS; путь к стартовому скрипту.

Выполнение стартового скрипта при запуске: вывод на экран команд и их результатов; остановка выполнения при первой ошибке.

Служебная команда conf-dump — выводит все параметры в формате ключ=значение. Подготовлены скрипты реальной ОС для тестирования разных вариантов запуска эмулятора.

Добавлены скрипты для тестирования:
sample_ok.vfs-Выполняется до команды cd;
sample_error.vfs-Останавливается на unknown_cmd;
sample_exit.vfs - Останавливается на exit.
Для запуска используются команды в терминале (для этого реализован парсер) python PW1.py --create-samples и python PW1.py --startup-script sample_ok.vfs (название скрипта)

Этап 3 — VFS (виртуальная файловая система)

Цель: подключить виртуальную файловую систему.

Что реализовано: Хранение VFS полностью в памяти. Источник данных — CSV-файл (для бинарных данных используется base64). Сообщения об ошибках при проблемах загрузки VFS (файл не найден, неверный формат).

Служебная команда vfs-info: имя VFS; SHA-256 хеш её содержимого.

Подготовлены тестовые VFS-файлы: минимальная VFS; несколько файлов и папок; вложенность не менее 3 уровней.

Файлы для тестирования создаются через терминал с помощью команды: python PW1.py --create-samples (для этого реализован парсер, как и в этапе 2)

Добавлены скрипты для тестирования:
test_vfs_full.vfs - тест всех реализованных команд
test_vfs_errors.vfs - проверка на вывод ошибки при неправильном формате подаваемого файла
test_vfs_navigation - тест cd .. и абсолютных путей, тест должен завершиться закрытием граф. интерфейса эмулятора.

Добавлены тестовые CSV-файлы:
vfs_minimal.csv -
vfs_nested.csv - 
vfs_error.csv -

Примеры команд для тестов:
1.python PW1.py --vfs-file vfs_nested.csv --startup-script test_vfs_full.vfs -скрипт должен остановиться на первой же ошибке cd non-existent-dir
2.python PW1.py --vfs-file vfs_nested.csv --startup-script test_vfs_navigation.vfs - В эмуляторе последним отобразится exit и скрипт завершится 
3.python PW1.py --vfs-file vfs_error.csv - FATAL VFS LOAD ERROR в терминал, неверный формат
4.python PW1.py --vfs-file vfs_nested.csv --startup-script test_vfs_errors.vfs -выведутся две ошибки cd: /nonexistent: No such directory in VFS or is a file и --- Script stopped due to error on line: cd /nonexistent ---

Этап 4 — Основные команды

Цель: сделать поведение максимально похоже на настоящую командную строку.

Что реализовано: Логика для команд ls и cd. Новые команды: tac — выводит содержимое файла в обратном порядке. head — выводит первые строки файла. uniq — удаляет дублирующиеся строки из вывода. Новый стартовый скрипт для тестирования всех режимов работы.

Коммит: feat: implement core UNIX-like commands (ls, cd, tac, head, uniq)

Этап 5 — Дополнительные команды

Цель: поддержать команды, изменяющие состояние VFS.

Что реализовано: Команда rmdir — удаляет папку из виртуальной файловой системы. Команда mv — перемещает/переименовывает файл или директорию.

Новый тестовый скрипт, который проверяет: все предыдущие команды; корректность изменения состояния VFS в памяти; обработку ошибок при некорректных операциях.